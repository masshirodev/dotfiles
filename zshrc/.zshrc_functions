function ii() {
  gio open "$@" &>/dev/null
}

function rn() {
  for file in *$3*; do mv "$file" "${file/$1/$2}"; done
}

# bash function to open all files in directory and subdirectories and replace a string
# example usage: rasid "oldstring" "newstring" "/path/to/directory"
function rasid() {
  if [ -z "$1" ]; then
    echo "No arguments supplied"
    return
  fi

  if [ -z "$2" ]; then
    echo "No arguments supplied"
    return
  fi

  if [ -z "$3" ]; then
    echo "No arguments supplied"
    return
  fi

  grep -rl "$1" $3 | xargs sed -i "s/$1/$2/g" 
}

function mermaid() {
  mmdc -i "$1" -o "${1%.*}.svg"
  ii "${1%.*}.svg"
}

function jelly() {
   if sudo systemctl is-active --quiet jellyfin.service; then
       sudo systemctl stop jellyfin.service
       echo "Stopped Jellyfin"
   else
       sudo systemctl start jellyfin.service
       echo "Started Jellyfin" 
   fi
   sleep 1
   sudo systemctl status jellyfin.service
}

function resetcliphistory() {
  pkill -f "wl-paste.*cliphist" && wl-paste --type text --watch cliphist store &        
  wl-paste --type image --watch cliphist store &
}

# Start AI services: Ollama + WebUI + Browser
ai-up() {
    sudo systemctl start ollama
    docker start open-webui
    sleep 2
    xdg-open "http://localhost:3000"
}

# Stop AI services and reclaim VRAM/RAM
ai-down() {
    echo "Stopping Open WebUI..."
    docker stop open-webui >/dev/null 2>&1
    
    echo "Stopping Ollama..."
    sudo systemctl stop ollama
    
    echo "All AI services stopped. Resources reclaimed."
}
